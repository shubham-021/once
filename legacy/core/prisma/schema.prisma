
generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url = env("DATABASE_URL")
}

model Story{
  id                  Int       @id @default(autoincrement())
  title               String
  isCompleted         Boolean
  description         String
  startingScene       String
  genre               String
  content             String
  protagonist         Protagonist?
  scene               Scene[]
}

model Protagonist{
  id                  Int       @id @default(autoincrement())
  name                String
  health              Int
  inventory           String[]
  location            String
  baseTraits          String[]
  currentTraits       String[]
  storyId             Int       @unique
  Story               Story     @relation(references: [id],fields: [storyId])
}

model Scene{
  id                  Int       @id @default(autoincrement())
  turnNumber          Int       
  narrationText       String    
  userAction          String    
  timestamp           DateTime  @default(now())
  protagonistSnapshot Json
  storyId             Int
  story               Story     @relation(fields: [storyId], references: [id])
}
